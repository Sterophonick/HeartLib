#include "libheart.h"
pRotData rotData = (pRotData)sprites;
u16* OBJPaletteMem 	=(u16*)0x5000200;
u16* OAMData		=(u16*)0x6010000;
u16* OAM = (u16*)0x7000000;
extern gba_system __hrt_system;

const double SIN[360] = { 0 , 4.46781 , 8.93426 , 13.398 , 17.8576 , 22.3119 , 26.7593 , 31.1985 , 35.6283 , 40.0472 , 44.4539 ,
		48.8471 , 53.2253 , 57.5874 , 61.932 , 66.2576 , 70.5631 , 74.8471 , 79.1083 , 83.3454 , 87.5571 ,
		91.7421 , 95.8992 , 100.027 , 104.124 , 108.19 , 112.223 , 116.221 , 120.185 , 124.111 , 128 ,
		131.85 , 135.659 , 139.427 , 143.153 , 146.835 , 150.473 , 154.065 , 157.609 , 161.106 , 164.554 ,
		167.951 , 171.297 , 174.591 , 177.832 , 181.019 , 184.151 , 187.226 , 190.245 , 193.206 , 196.107 ,
		198.949 , 201.731 , 204.451 , 207.108 , 209.703 , 212.234 , 214.7 , 217.1 , 219.435 , 221.702 ,
		223.903 , 226.034 , 228.098 , 230.091 , 232.015 , 233.868 , 235.649 , 237.359 , 238.996 , 240.561 ,
		242.053 , 243.47 , 244.814 , 246.083 , 247.277 , 248.396 , 249.439 , 250.406 , 251.297 , 252.111 ,
		252.848 , 253.509 , 254.092 , 254.598 , 255.026 , 255.376 , 255.649 , 255.844 , 255.961 , 256 ,
		255.961 , 255.844 , 255.649 , 255.376 , 255.026 , 254.598 , 254.092 , 253.509 , 252.848 , 252.111 ,
		251.297 , 250.406 , 249.439 , 248.396 , 247.277 , 246.083 , 244.814 , 243.471 , 242.053 , 240.561 ,
		238.997 , 237.359 , 235.649 , 233.868 , 232.015 , 230.091 , 228.098 , 226.035 , 223.903 , 221.703 ,
		219.435 , 217.101 , 214.7 , 212.234 , 209.703 , 207.109 , 204.451 , 201.731 , 198.95 , 196.108 ,
		193.206 , 190.245 , 187.227 , 184.151 , 181.02 , 177.833 , 174.592 , 171.298 , 167.952 , 164.554 ,
		161.106 , 157.61 , 154.065 , 150.473 , 146.836 , 143.154 , 139.428 , 135.66 , 131.85 , 128 ,
		124.112 , 120.185 , 116.222 , 112.224 , 108.191 , 104.125 , 100.028 , 95.8998 , 91.7428 , 87.5577 ,
		83.346 , 79.1089 , 74.8477 , 70.5638 , 66.2583 , 61.9326 , 57.5881 , 53.226 , 48.8477 , 44.4546 ,
		40.0479 , 35.629 , 31.1992 , 26.7599 , 22.3125 , 17.8583 , 13.3987 , 8.93494 , 4.46849 , 0.000679319 ,
		-4.46713 , -8.93358 , -13.3973 , -17.857 , -22.3112 , -26.7586 , -31.1979 , -35.6276 , -40.0465 , -44.4532 ,
		-48.8464 , -53.2247 , -57.5868 , -61.9313 , -66.257 , -70.5625 , -74.8464 , -79.1076 , -83.3447 , -87.5564 ,
		-91.7415 , -95.8986 , -100.026 , -104.124 , -108.19 , -112.222 , -116.221 , -120.184 , -124.111 , -127.999 ,
		-131.849 , -135.659 , -139.427 , -143.153 , -146.835 , -150.472 , -154.064 , -157.609 , -161.105 , -164.553 ,
		-167.95 , -171.297 , -174.591 , -177.832 , -181.019 , -184.15 , -187.226 , -190.244 , -193.205 , -196.107 ,
		-198.949 , -201.73 , -204.45 , -207.108 , -209.702 , -212.233 , -214.699 , -217.1 , -219.434 , -221.702 ,
		-223.902 , -226.034 , -228.097 , -230.091 , -232.014 , -233.867 , -235.649 , -237.359 , -238.996 , -240.561 ,
		-242.052 , -243.47 , -244.814 , -246.083 , -247.277 , -248.395 , -249.439 , -250.406 , -251.296 , -252.111 ,
		-252.848 , -253.508 , -254.092 , -254.598 , -255.026 , -255.376 , -255.649 , -255.844 , -255.961 , -256 ,
		-255.961 , -255.844 , -255.649 , -255.376 , -255.026 , -254.598 , -254.092 , -253.509 , -252.848 , -252.111 ,
		-251.297 , -250.406 , -249.439 , -248.396 , -247.277 , -246.083 , -244.814 , -243.471 , -242.053 , -240.562 ,
		-238.997 , -237.359 , -235.65 , -233.868 , -232.015 , -230.092 , -228.098 , -226.035 , -223.903 , -221.703 ,
		-219.435 , -217.101 , -214.7 , -212.234 , -209.704 , -207.109 , -204.451 , -201.731 , -198.95 , -196.108 ,
		-193.206 , -190.246 , -187.227 , -184.152 , -181.02 , -177.833 , -174.592 , -171.298 , -167.952 , -164.555 ,
		-161.107 , -157.61 , -154.066 , -150.474 , -146.837 , -143.154 , -139.429 , -135.66 , -131.851 , -128.001 ,
		-124.112 , -120.186 , -116.223 , -112.224 , -108.191 , -104.126 , -100.028 , -95.9005 , -91.7434 , -87.5584 ,
		-83.3467 , -79.1096 , -74.8484 , -70.5644 , -66.2589 , -61.9333 , -57.5887 , -53.2267 , -48.8484 , -44.4552 ,
		-40.0485 , -35.6296 , -31.1999 , -26.7606 , -22.3132 , -17.859 , -13.3994 , -8.93562 , -4.46917 ,  };

const double COS[360] = { 256 , 255.961 , 255.844 , 255.649 , 255.376 , 255.026 , 254.598 , 254.092 , 253.509 , 252.848 , 252.111 ,
		251.297 , 250.406 , 249.439 , 248.396 , 247.277 , 246.083 , 244.814 , 243.47 , 242.053 , 240.561 ,
		238.997 , 237.359 , 235.649 , 233.868 , 232.015 , 230.091 , 228.098 , 226.035 , 223.903 , 221.703 ,
		219.435 , 217.1 , 214.7 , 212.234 , 209.703 , 207.108 , 204.451 , 201.731 , 198.949 , 196.107 ,
		193.206 , 190.245 , 187.227 , 184.151 , 181.019 , 177.833 , 174.592 , 171.298 , 167.951 , 164.554 ,
		161.106 , 157.609 , 154.065 , 150.473 , 146.836 , 143.154 , 139.428 , 135.66 , 131.85 , 128 ,
		124.111 , 120.185 , 116.222 , 112.223 , 108.19 , 104.125 , 100.027 , 95.8995 , 91.7424 , 87.5574 ,
		83.3457 , 79.1086 , 74.8474 , 70.5634 , 66.2579 , 61.9323 , 57.5878 , 53.2257 , 48.8474 , 44.4542 ,
		40.0475 , 35.6286 , 31.1989 , 26.7596 , 22.3122 , 17.858 , 13.3983 , 8.9346 , 4.46815 , 0.000339659 ,
		-4.46747 , -8.93392 , -13.3977 , -17.8573 , -22.3115 , -26.7589 , -31.1982 , -35.6279 , -40.0469 , -44.4536 ,
		-48.8467 , -53.225 , -57.5871 , -61.9316 , -66.2573 , -70.5628 , -74.8468 , -79.108 , -83.3451 , -87.5568 ,
		-91.7418 , -95.8989 , -100.027 , -104.124 , -108.19 , -112.223 , -116.221 , -120.184 , -124.111 , -128 ,
		-131.849 , -135.659 , -139.427 , -143.153 , -146.835 , -150.473 , -154.064 , -157.609 , -161.106 , -164.553 ,
		-167.951 , -171.297 , -174.591 , -177.832 , -181.019 , -184.151 , -187.226 , -190.245 , -193.205 , -196.107 ,
		-198.949 , -201.73 , -204.45 , -207.108 , -209.703 , -212.233 , -214.699 , -217.1 , -219.435 , -221.702 ,
		-223.902 , -226.034 , -228.097 , -230.091 , -232.015 , -233.867 , -235.649 , -237.359 , -238.996 , -240.561 ,
		-242.053 , -243.47 , -244.814 , -246.083 , -247.277 , -248.396 , -249.439 , -250.406 , -251.296 , -252.111 ,
		-252.848 , -253.509 , -254.092 , -254.598 , -255.026 , -255.376 , -255.649 , -255.844 , -255.961 , -256 ,
		-255.961 , -255.844 , -255.649 , -255.376 , -255.026 , -254.598 , -254.092 , -253.509 , -252.848 , -252.111 ,
		-251.297 , -250.406 , -249.439 , -248.396 , -247.277 , -246.083 , -244.814 , -243.471 , -242.053 , -240.562 ,
		-238.997 , -237.359 , -235.65 , -233.868 , -232.015 , -230.092 , -228.098 , -226.035 , -223.903 , -221.703 ,
		-219.435 , -217.101 , -214.7 , -212.234 , -209.703 , -207.109 , -204.451 , -201.731 , -198.95 , -196.108 ,
		-193.206 , -190.246 , -187.227 , -184.152 , -181.02 , -177.833 , -174.592 , -171.298 , -167.952 , -164.554 ,
		-161.107 , -157.61 , -154.065 , -150.474 , -146.836 , -143.154 , -139.428 , -135.66 , -131.851 , -128.001 ,
		-124.112 , -120.186 , -116.222 , -112.224 , -108.191 , -104.125 , -100.028 , -95.9002 , -91.7431 , -87.558 ,
		-83.3463 , -79.1093 , -74.8481 , -70.5641 , -66.2586 , -61.9329 , -57.5884 , -53.2263 , -48.8481 , -44.4549 ,
		-40.0482 , -35.6293 , -31.1995 , -26.7603 , -22.3129 , -17.8587 , -13.399 , -8.93528 , -4.46883 , -0.00101898 ,
		4.46679 , 8.93325 , 13.397 , 17.8566 , 22.3108 , 26.7583 , 31.1975 , 35.6273 , 40.0462 , 44.4529 ,
		48.8461 , 53.2244 , 57.5864 , 61.931 , 66.2566 , 70.5621 , 74.8461 , 79.1073 , 83.3444 , 87.5561 ,
		91.7412 , 95.8983 , 100.026 , 104.124 , 108.189 , 112.222 , 116.221 , 120.184 , 124.11 , 127.999 ,
		131.849 , 135.658 , 139.427 , 143.152 , 146.835 , 150.472 , 154.064 , 157.608 , 161.105 , 164.553 ,
		167.95 , 171.297 , 174.591 , 177.832 , 181.018 , 184.15 , 187.226 , 190.244 , 193.205 , 196.107 ,
		198.949 , 201.73 , 204.45 , 207.108 , 209.702 , 212.233 , 214.699 , 217.1 , 219.434 , 221.702 ,
		223.902 , 226.034 , 228.097 , 230.091 , 232.014 , 233.867 , 235.649 , 237.359 , 238.996 , 240.561 ,
		242.052 , 243.47 , 244.814 , 246.083 , 247.277 , 248.395 , 249.438 , 250.406 , 251.296 , 252.111 ,
		252.848 , 253.508 , 254.092 , 254.597 , 255.026 , 255.376 , 255.649 , 255.844 , 255.961 ,  };

const double RAD[360] = { 0 , 0.0174533 , 0.0349066 , 0.0523598 , 0.0698131 , 0.0872664 , 0.10472 , 0.122173 , 0.139626 , 0.15708 , 0.174533 ,
		0.191986 , 0.209439 , 0.226893 , 0.244346 , 0.261799 , 0.279252 , 0.296706 , 0.314159 , 0.331612 , 0.349066 ,
		0.366519 , 0.383972 , 0.401425 , 0.418879 , 0.436332 , 0.453785 , 0.471238 , 0.488692 , 0.506145 , 0.523598 ,
		0.541052 , 0.558505 , 0.575958 , 0.593411 , 0.610865 , 0.628318 , 0.645771 , 0.663225 , 0.680678 , 0.698131 ,
		0.715584 , 0.733038 , 0.750491 , 0.767944 , 0.785397 , 0.802851 , 0.820304 , 0.837757 , 0.855211 , 0.872664 ,
		0.890117 , 0.90757 , 0.925024 , 0.942477 , 0.95993 , 0.977384 , 0.994837 , 1.01229 , 1.02974 , 1.0472 ,
		1.06465 , 1.0821 , 1.09956 , 1.11701 , 1.13446 , 1.15192 , 1.16937 , 1.18682 , 1.20428 , 1.22173 ,
		1.23918 , 1.25664 , 1.27409 , 1.29154 , 1.309 , 1.32645 , 1.3439 , 1.36136 , 1.37881 , 1.39626 ,
		1.41372 , 1.43117 , 1.44862 , 1.46608 , 1.48353 , 1.50098 , 1.51844 , 1.53589 , 1.55334 , 1.57079 ,
		1.58825 , 1.6057 , 1.62315 , 1.64061 , 1.65806 , 1.67551 , 1.69297 , 1.71042 , 1.72787 , 1.74533 ,
		1.76278 , 1.78023 , 1.79769 , 1.81514 , 1.83259 , 1.85005 , 1.8675 , 1.88495 , 1.90241 , 1.91986 ,
		1.93731 , 1.95477 , 1.97222 , 1.98967 , 2.00713 , 2.02458 , 2.04203 , 2.05949 , 2.07694 , 2.09439 ,
		2.11185 , 2.1293 , 2.14675 , 2.16421 , 2.18166 , 2.19911 , 2.21657 , 2.23402 , 2.25147 , 2.26893 ,
		2.28638 , 2.30383 , 2.32129 , 2.33874 , 2.35619 , 2.37365 , 2.3911 , 2.40855 , 2.42601 , 2.44346 ,
		2.46091 , 2.47837 , 2.49582 , 2.51327 , 2.53073 , 2.54818 , 2.56563 , 2.58309 , 2.60054 , 2.61799 ,
		2.63544 , 2.6529 , 2.67035 , 2.6878 , 2.70526 , 2.72271 , 2.74016 , 2.75762 , 2.77507 , 2.79252 ,
		2.80998 , 2.82743 , 2.84488 , 2.86234 , 2.87979 , 2.89724 , 2.9147 , 2.93215 , 2.9496 , 2.96706 ,
		2.98451 , 3.00196 , 3.01942 , 3.03687 , 3.05432 , 3.07178 , 3.08923 , 3.10668 , 3.12414 , 3.14159 ,
		3.15904 , 3.1765 , 3.19395 , 3.2114 , 3.22886 , 3.24631 , 3.26376 , 3.28122 , 3.29867 , 3.31612 ,
		3.33358 , 3.35103 , 3.36848 , 3.38594 , 3.40339 , 3.42084 , 3.4383 , 3.45575 , 3.4732 , 3.49066 ,
		3.50811 , 3.52556 , 3.54302 , 3.56047 , 3.57792 , 3.59538 , 3.61283 , 3.63028 , 3.64774 , 3.66519 ,
		3.68264 , 3.70009 , 3.71755 , 3.735 , 3.75245 , 3.76991 , 3.78736 , 3.80481 , 3.82227 , 3.83972 ,
		3.85717 , 3.87463 , 3.89208 , 3.90953 , 3.92699 , 3.94444 , 3.96189 , 3.97935 , 3.9968 , 4.01425 ,
		4.03171 , 4.04916 , 4.06661 , 4.08407 , 4.10152 , 4.11897 , 4.13643 , 4.15388 , 4.17133 , 4.18879 ,
		4.20624 , 4.22369 , 4.24115 , 4.2586 , 4.27605 , 4.29351 , 4.31096 , 4.32841 , 4.34587 , 4.36332 ,
		4.38077 , 4.39823 , 4.41568 , 4.43313 , 4.45059 , 4.46804 , 4.48549 , 4.50295 , 4.5204 , 4.53785 ,
		4.55531 , 4.57276 , 4.59021 , 4.60767 , 4.62512 , 4.64257 , 4.66003 , 4.67748 , 4.69493 , 4.71238 ,
		4.72984 , 4.74729 , 4.76474 , 4.7822 , 4.79965 , 4.8171 , 4.83456 , 4.85201 , 4.86946 , 4.88692 ,
		4.90437 , 4.92182 , 4.93928 , 4.95673 , 4.97418 , 4.99164 , 5.00909 , 5.02654 , 5.044 , 5.06145 ,
		5.0789 , 5.09636 , 5.11381 , 5.13126 , 5.14872 , 5.16617 , 5.18362 , 5.20108 , 5.21853 , 5.23598 ,
		5.25344 , 5.27089 , 5.28834 , 5.3058 , 5.32325 , 5.3407 , 5.35816 , 5.37561 , 5.39306 , 5.41052 ,
		5.42797 , 5.44542 , 5.46288 , 5.48033 , 5.49778 , 5.51524 , 5.53269 , 5.55014 , 5.5676 , 5.58505 ,
		5.6025 , 5.61996 , 5.63741 , 5.65486 , 5.67232 , 5.68977 , 5.70722 , 5.72468 , 5.74213 , 5.75958 ,
		5.77703 , 5.79449 , 5.81194 , 5.82939 , 5.84685 , 5.8643 , 5.88175 , 5.89921 , 5.91666 , 5.93411 ,
		5.95157 , 5.96902 , 5.98647 , 6.00393 , 6.02138 , 6.03883 , 6.05629 , 6.07374 , 6.09119 , 6.10865 ,
		6.1261 , 6.14355 , 6.16101 , 6.17846 , 6.19591 , 6.21337 , 6.23082 , 6.24827 , 6.26573 ,  };

void hrt_CopyOAM(void)
{
	if (__hrt_system.hrt_start == 1) {
		u16 loop;
		u16* temp;
		temp = (u16*)sprites;
		for (loop = 0; loop < 128 * 4; loop++)
		{
			OAM[loop] = temp[loop];
		}
	}
}
void hrt_CreateOBJ(u8 spr, u8 stx, u8 sty, u8 size, u8 affine, u8 hflip, u8 vflip, u8 shape, u8 dblsize, u8 mosaic, u8 pal, u8 color, u8 mode, u8 priority, u32 offset)
{
	if (__hrt_system.hrt_start == 1) {
		if (affine == 1) {
			sprites[spr].attribute0 = (color * 8192) | (shape * 0x4000) | (mode * 0x400) | (mosaic * 0x1000) | (0x100) | (dblsize * 0x200) | sty;
			sprites[spr].attribute1 = (size * 16384) | ((spr) << 9) | (hflip * 4096) | (vflip * 8192) | stx;
			sprites[spr].attribute2 = (512 + offset) | ((priority) << 10) | ((pal) << 12);
			hrt_AffineOBJ(spr, 0, 256, 256);
		}
		else {
			sprites[spr].attribute0 = (color * 8192) | (shape * 0x4000) | (mode * 0x400) | (mosaic * 0x1000) | (dblsize * 0x200) | sty;
			sprites[spr].attribute1 = (size * 16384) | hflip * 4096 | (vflip * 8192) | stx;
			sprites[spr].attribute2 = (512 + offset) | ((priority) << 10) | ((pal) << 12);
		}
	}
}

void hrt_AffineOBJ(int rotDataIndex, s32 angle, s32 x_scale, s32 y_scale)
{
	if (__hrt_system.hrt_start == 1) {
		s32 pa, pb, pc, pd;
		pa = ((x_scale) * (s32)COS[angle % 360]) >> 8;
		pb = ((y_scale) * (s32)SIN[angle % 360]) >> 8;
		pc = ((x_scale) * (s32)-SIN[angle % 360]) >> 8;
		pd = ((y_scale) * (s32)COS[angle % 360]) >> 8;
		rotData[rotDataIndex].pa = pa;
		rotData[rotDataIndex].pb = pb;
		rotData[rotDataIndex].pc = pc;
		rotData[rotDataIndex].pd = pd;
	}
}
void hrt_SetOBJX(u8 spr, s16 x)
{
	if (__hrt_system.hrt_start == 1) {
		sprites[spr].attribute1 &= 0xFE00;
		sprites[spr].attribute1 |= x;
	}
}

void hrt_SetOBJY(u8 spr, s16 y)
{
	if (__hrt_system.hrt_start == 1) {
		sprites[spr].attribute0 &= 0xFF00;
		sprites[spr].attribute0 |= y;
	}
}

void hrt_SetOBJXY(u8 spr, s16 x, s16 y)
{
	if (__hrt_system.hrt_start == 1) {
		sprites[spr].attribute0 &= 0xFF00;
		sprites[spr].attribute0 |= y;
		sprites[spr].attribute1 &= 0xFE00;
		sprites[spr].attribute1 |= x;
	}
}

void hrt_CloneOBJ(int ospr, int nspr) //duplicates a Sprite
{
	if (__hrt_system.hrt_start == 1) {
		// set sprite offscreen, and set it up (size,etc)
		sprites[nspr].attribute0 = sprites[ospr].attribute0;
		sprites[nspr].attribute1 = sprites[ospr].attribute1;
		sprites[nspr].attribute2 = sprites[ospr].attribute2; // NOTE: mode4 doesn't support the first tiles, so offset of 512 is requirerd
	}
}


void hrt_MoveSpriteInDirection(u8 sprite, u16 direction, int steps)
{
	if (__hrt_system.hrt_start == 1)
	{
		hrt_SetOBJXY(sprite, (hrt_GetOBJX(sprite) + (SIN[direction])*steps), (hrt_GetOBJY(sprite) + (COS[direction])*steps));
	}
}

u16 hrt_PointOBJTowardsPosition(u8 sprite, int x, int y)
{
	int delta_x;
	int delta_y;
	u16 direction;
	if (__hrt_system.hrt_start == 1)
	{
		delta_x = x - hrt_GetOBJX(sprite);
		delta_y = y - hrt_GetOBJY(sprite);
		if (delta_y == 0)
		{
			if (delta_x < 0)
			{
				return 270;
			}
			else
			{
				return 90;
			}
		}
		else {
			if (delta_y < 0)
			{
				direction = (180 + (atan(delta_x / delta_y)));
			}
			else {
				direction =(atan(delta_x / delta_y));
			}
		}
		return direction;
	}
	return 0;
}

u8 hrt_GetOBJX(u8 sprite)
{
	u8 spriteX = 0;
	if (__hrt_system.hrt_start == 1)
	{
		spriteX = (((s16)(sprites[sprite].attribute1 << 7)) >> 7) + (4 << (sprites[sprite].attribute1 >> 14));
		return spriteX;
	}
	return 0;
}

u8 hrt_GetOBJY(u8 sprite)
{
	u8 spriteY = 0;
	if (__hrt_system.hrt_start == 1)
	{
		spriteY = (((s16)(sprites[sprite].attribute0 << 8)) >> 8) + (4 << (sprites[sprite].attribute1 >> 14));
		return spriteY;
	}
	return 0;
}

void hrt_EnableOBJHFlip(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute1 |= (1 << 12);
	}
}

void hrt_DisableOBJHFlip(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute1 &= ~(1 << 12);
	}
}

void hrt_EnableOBJVFlip(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute1 |= (1 << 13);
	}
}

void hrt_DisableOBJVFlip(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute1 &= ~(1 << 13);
	}
}

void hrt_SetOBJMode(u8 objno, u8 mode)
{
	if(__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute0 |= (mode << 10);
	}
}

void hrt_EnableOBJMosaic(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute0 |= (1 << 12);
	}
}

void hrt_DisableOBJMosaic(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute0 &= ~(1 << 12);
	}
}

void hrt_SetOBJColor16(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute0 &= ~(1 << 13);
	}
}

void hrt_SetOBJColor256(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute0 |= (1 << 13);
	}
}

void hrt_SetOBJShape(u8 objno, u8 shape)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute0 |= (shape << 14);
	}
}

void hrt_SetOBJSize(u8 objno, u8 size)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute1 |= (size << 14);
	}
}

void hrt_SetOBJOffset(u8 objno, u8 data)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute2 |= (data << 0);
	}
}

void hrt_SetOBJPriority(u8 objno, u8 prior)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute2 |= (prior << 10);
	}
}

void hrt_SetOBJPalette(u8 objno, u8 palette)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute2 |= (palette << 12);
	}
}

void hrt_DestroyOBJ(u8 objno)
{
	if (__hrt_system.hrt_start == 1)
	{
		sprites[objno].attribute0 = 0;
		sprites[objno].attribute1 = 0;
		sprites[objno].attribute2 = 0;
	}
}